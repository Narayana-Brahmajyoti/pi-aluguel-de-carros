import React, { useState, useEffect } from 'react';
import axios from 'axios';
import { useLocation, Link } from 'react-router-dom';
import Header from './Header';
import Footer from './Footer';
const placeholderImage = 'https://via.placeholder.com/150';

const CategoryResults = () => {
  const [produtos, setProdutos] = useState([]);
  const location = useLocation();
  const { categoriaNome } = location.state;

  useEffect(() => {
    const fetchProdutosPorCategoria = async () => {
      try {
        const response = await axios.get(`http://localhost:8080/produto/filter?categoria=${categoriaNome}`);
        setProdutos(response.data);
      } catch (error) {
        console.error('Erro ao buscar produtos por categoria:', error);
      }
    };

    fetchProdutosPorCategoria();
  }, [categoriaNome]);

  return (
    <div>
      <Header />
      <div className="main-content">
        <div className="container">
          <h1>Produtos na categoria {categoriaNome}</h1>
          <div className="row">
          {produtos.map((produto) => (
            <div key={produto.idProduto} className="col-md-6">
              <div className="card mb-4">
                <div className="row g-0">
                  <div className="col-md-6">
                    <img
                      src={produto.imagem && produto.imagem[0] ? produto.imagem[0].urlImagem : placeholderImage}
                      alt={produto.imagem && produto.imagem[0] ? produto.imagem[0].tituloImagem : 'Imagem indisponÃ­vel'}
                      className="card-img-top h-100"
                    />
                  </div>
                  <div className="col-md-6">
                    <div className="card-body">
                      <div className='Titles-cards'>
                        <div className='row'>
                        <div className='col-md-5'>
                        <h5 className="card-title">{produto.nomeProduto}</h5> 
                        </div>

                      <div className='col-md-2'>
                      <svg width="75" height="14" viewBox="0 0 75 14" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7.27778 0L8.91174 4.83688H14.1994L9.92159 7.82624L11.5555 12.6631L7.27778 9.67376L3.00001 12.6631L4.63397 7.82624L0.3562 4.83688H5.64382L7.27778 0Z" fill="#1DBEB4"/>
<path d="M22.2778 0L23.9117 4.83688H29.1994L24.9216 7.82624L26.5555 12.6631L22.2778 9.67376L18 12.6631L19.634 7.82624L15.3562 4.83688H20.6438L22.2778 0Z" fill="#1DBEB4"/>
<path d="M37.2778 0L38.9117 4.83688H44.1994L39.9216 7.82624L41.5555 12.6631L37.2778 9.67376L33 12.6631L34.634 7.82624L30.3562 4.83688H35.6438L37.2778 0Z" fill="#1DBEB4"/>
<path d="M67.2778 0L68.9117 4.83688H74.1994L69.9216 7.82624L71.5555 12.6631L67.2778 9.67376L63 12.6631L64.634 7.82624L60.3562 4.83688H65.6438L67.2778 0Z" fill="#1DBEB4"/>
<path d="M52.2778 0L53.9117 4.83688H59.1994L54.9216 7.82624L56.5555 12.6631L52.2778 9.67376L48 12.6631L49.634 7.82624L45.3562 4.83688H50.6438L52.2778 0Z" fill="#1DBEB4"/>
</svg>
                      </div>
                      <div className='col-md-5'>
                      <svg width="101" height="45" viewBox="0 0 101 45" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="65.5" y="0.5" width="33" height="26" rx="9.5" fill="#383B58" stroke="#383B58"/>
<path d="M78.8599 17.8613H79.0454C79.8267 17.8613 80.4973 17.7669 81.0572 17.5781C81.6236 17.3828 82.0891 17.1029 82.4536 16.7383C82.8182 16.3737 83.0884 15.9277 83.2642 15.4004C83.44 14.8665 83.5279 14.2611 83.5279 13.584V10.8887C83.5279 10.3743 83.4758 9.92188 83.3716 9.53125C83.274 9.14062 83.1307 8.81836 82.9419 8.56445C82.7596 8.30404 82.5448 8.10872 82.2974 7.97852C82.0565 7.84831 81.7896 7.7832 81.4966 7.7832C81.1841 7.7832 80.9074 7.86133 80.6665 8.01758C80.4257 8.16732 80.2206 8.3724 80.0513 8.63281C79.8885 8.89323 79.7616 9.19271 79.6704 9.53125C79.5858 9.86328 79.5435 10.2116 79.5435 10.5762C79.5435 10.9408 79.5858 11.2891 79.6704 11.6211C79.7551 11.9466 79.882 12.2363 80.0513 12.4902C80.2206 12.7376 80.4322 12.9362 80.6861 13.0859C80.94 13.2292 81.2395 13.3008 81.5845 13.3008C81.9165 13.3008 82.2128 13.2389 82.4732 13.1152C82.7401 12.985 82.9647 12.8158 83.147 12.6074C83.3358 12.3991 83.479 12.168 83.5767 11.9141C83.6809 11.6602 83.7329 11.403 83.7329 11.1426L84.6607 11.6504C84.6607 12.1061 84.563 12.5553 84.3677 12.998C84.1724 13.4408 83.899 13.8444 83.5474 14.209C83.2023 14.5671 82.802 14.8535 82.3462 15.0684C81.8905 15.2832 81.4022 15.3906 80.8814 15.3906C80.2173 15.3906 79.6281 15.2702 79.1138 15.0293C78.5995 14.7819 78.1633 14.4434 77.8052 14.0137C77.4536 13.5775 77.1867 13.0697 77.0044 12.4902C76.8221 11.9108 76.731 11.2826 76.731 10.6055C76.731 9.91536 76.8417 9.26758 77.063 8.66211C77.2909 8.05664 77.6132 7.52279 78.0298 7.06055C78.453 6.59831 78.9576 6.23698 79.5435 5.97656C80.1359 5.70964 80.7935 5.57617 81.5161 5.57617C82.2388 5.57617 82.8964 5.71615 83.4888 5.99609C84.0812 6.27604 84.5891 6.67318 85.0122 7.1875C85.4354 7.69531 85.7609 8.30404 85.9888 9.01367C86.2232 9.72331 86.3404 10.5111 86.3404 11.377V12.3535C86.3404 13.278 86.2395 14.1374 86.0376 14.9316C85.8423 15.7259 85.5461 16.4453 85.149 17.0898C84.7583 17.7279 84.2701 18.2747 83.6841 18.7305C83.1047 19.1862 82.4309 19.5345 81.6626 19.7754C80.8944 20.0163 80.035 20.1367 79.0845 20.1367H78.8599V17.8613Z" fill="#F3F1ED"/>
<path d="M33.1494 32.0469H34.8857L37.4424 39.3545L39.999 32.0469H41.7354L38.1396 42H36.7451L33.1494 32.0469ZM32.2129 32.0469H33.9424L34.2568 39.1699V42H32.2129V32.0469ZM40.9424 32.0469H42.6787V42H40.6279V39.1699L40.9424 32.0469ZM48.7285 40.2295V34.6035H50.6973V42H48.8447L48.7285 40.2295ZM48.9473 38.7119L49.5283 38.6982C49.5283 39.1904 49.4714 39.6484 49.3574 40.0723C49.2435 40.4915 49.0726 40.8561 48.8447 41.166C48.6169 41.4714 48.3298 41.7106 47.9834 41.8838C47.637 42.0524 47.2292 42.1367 46.7598 42.1367C46.3997 42.1367 46.0671 42.0866 45.7617 41.9863C45.4609 41.8815 45.2012 41.7197 44.9824 41.501C44.7682 41.2777 44.5996 40.9928 44.4766 40.6465C44.3581 40.2956 44.2988 39.874 44.2988 39.3818V34.6035H46.2676V39.3955C46.2676 39.6143 46.2926 39.7988 46.3428 39.9492C46.3975 40.0996 46.4727 40.2227 46.5684 40.3184C46.6641 40.4141 46.7757 40.4824 46.9033 40.5234C47.0355 40.5645 47.1813 40.585 47.3408 40.585C47.7464 40.585 48.0654 40.5029 48.2979 40.3389C48.5348 40.1748 48.7012 39.9515 48.7969 39.6689C48.8971 39.3818 48.9473 39.0628 48.9473 38.7119ZM54.2793 34.6035V42H52.3037V34.6035H54.2793ZM52.1807 32.6758C52.1807 32.3887 52.2809 32.1517 52.4814 31.9648C52.682 31.778 52.9508 31.6846 53.2881 31.6846C53.6208 31.6846 53.8874 31.778 54.0879 31.9648C54.293 32.1517 54.3955 32.3887 54.3955 32.6758C54.3955 32.9629 54.293 33.1999 54.0879 33.3867C53.8874 33.5736 53.6208 33.667 53.2881 33.667C52.9508 33.667 52.682 33.5736 52.4814 33.3867C52.2809 33.1999 52.1807 32.9629 52.1807 32.6758ZM59.5293 34.6035V35.998H55.2227V34.6035H59.5293ZM56.2891 32.7783H58.2578V39.7715C58.2578 39.9857 58.2852 40.1497 58.3398 40.2637C58.3991 40.3776 58.4857 40.4574 58.5996 40.5029C58.7135 40.5439 58.8571 40.5645 59.0303 40.5645C59.1533 40.5645 59.2627 40.5599 59.3584 40.5508C59.4587 40.5371 59.543 40.5234 59.6113 40.5098L59.6182 41.959C59.4495 42.0137 59.2673 42.057 59.0713 42.0889C58.8753 42.1208 58.6589 42.1367 58.4219 42.1367C57.9889 42.1367 57.6107 42.0661 57.2871 41.9248C56.9681 41.779 56.722 41.5465 56.5488 41.2275C56.3757 40.9085 56.2891 40.4893 56.2891 39.9697V32.7783ZM60.1582 38.377V38.2334C60.1582 37.6911 60.2357 37.1921 60.3906 36.7363C60.5456 36.276 60.7712 35.8773 61.0674 35.54C61.3636 35.2028 61.7282 34.9408 62.1611 34.7539C62.5941 34.5625 63.0908 34.4668 63.6514 34.4668C64.2119 34.4668 64.7109 34.5625 65.1484 34.7539C65.5859 34.9408 65.9528 35.2028 66.249 35.54C66.5498 35.8773 66.7777 36.276 66.9326 36.7363C67.0876 37.1921 67.165 37.6911 67.165 38.2334V38.377C67.165 38.9147 67.0876 39.4137 66.9326 39.874C66.7777 40.3298 66.5498 40.7285 66.249 41.0703C65.9528 41.4076 65.5882 41.6696 65.1553 41.8564C64.7223 42.0433 64.2256 42.1367 63.665 42.1367C63.1045 42.1367 62.6055 42.0433 62.168 41.8564C61.735 41.6696 61.3682 41.4076 61.0674 41.0703C60.7712 40.7285 60.5456 40.3298 60.3906 39.874C60.2357 39.4137 60.1582 38.9147 60.1582 38.377ZM62.127 38.2334V38.377C62.127 38.6868 62.1543 38.9762 62.209 39.2451C62.2637 39.514 62.3503 39.751 62.4688 39.9561C62.5918 40.1566 62.7513 40.3138 62.9473 40.4277C63.1432 40.5417 63.3825 40.5986 63.665 40.5986C63.9385 40.5986 64.1732 40.5417 64.3691 40.4277C64.5651 40.3138 64.7223 40.1566 64.8408 39.9561C64.9593 39.751 65.0459 39.514 65.1006 39.2451C65.1598 38.9762 65.1895 38.6868 65.1895 38.377V38.2334C65.1895 37.9326 65.1598 37.6501 65.1006 37.3857C65.0459 37.1169 64.957 36.8799 64.834 36.6748C64.7155 36.4652 64.5583 36.3011 64.3623 36.1826C64.1663 36.0641 63.9294 36.0049 63.6514 36.0049C63.3734 36.0049 63.1364 36.0641 62.9404 36.1826C62.749 36.3011 62.5918 36.4652 62.4688 36.6748C62.3503 36.8799 62.2637 37.1169 62.209 37.3857C62.1543 37.6501 62.127 37.9326 62.127 38.2334ZM71.8613 31.5H73.8301V40.3047L73.6318 42H71.8613V31.5ZM78.5127 38.2266V38.3701C78.5127 38.9215 78.4535 39.4274 78.335 39.8877C78.221 40.348 78.0433 40.7467 77.8018 41.084C77.5602 41.4167 77.2594 41.6764 76.8994 41.8633C76.5439 42.0456 76.1247 42.1367 75.6416 42.1367C75.1904 42.1367 74.7985 42.0456 74.4658 41.8633C74.1377 41.681 73.862 41.4235 73.6387 41.0908C73.4154 40.7581 73.2354 40.3685 73.0986 39.9219C72.9619 39.4753 72.8594 38.9876 72.791 38.459V38.1445C72.8594 37.6159 72.9619 37.1283 73.0986 36.6816C73.2354 36.235 73.4154 35.8454 73.6387 35.5127C73.862 35.18 74.1377 34.9225 74.4658 34.7402C74.7939 34.5579 75.1813 34.4668 75.6279 34.4668C76.1156 34.4668 76.5394 34.5602 76.8994 34.7471C77.264 34.9294 77.5648 35.1891 77.8018 35.5264C78.0433 35.859 78.221 36.2555 78.335 36.7158C78.4535 37.1715 78.5127 37.6751 78.5127 38.2266ZM76.5439 38.3701V38.2266C76.5439 37.9258 76.5212 37.6432 76.4756 37.3789C76.4346 37.11 76.3617 36.8753 76.2568 36.6748C76.152 36.4697 76.0085 36.3079 75.8262 36.1895C75.6484 36.071 75.4183 36.0117 75.1357 36.0117C74.8669 36.0117 74.639 36.0573 74.4521 36.1484C74.2653 36.2396 74.1104 36.3672 73.9873 36.5312C73.8688 36.6953 73.7799 36.8913 73.7207 37.1191C73.6615 37.3424 73.625 37.5885 73.6113 37.8574V38.7529C73.625 39.113 73.6842 39.432 73.7891 39.71C73.8984 39.9834 74.0625 40.1999 74.2812 40.3594C74.5046 40.5143 74.7939 40.5918 75.1494 40.5918C75.4274 40.5918 75.6576 40.5371 75.8398 40.4277C76.0221 40.3184 76.1634 40.1634 76.2637 39.9629C76.3685 39.7624 76.4414 39.5277 76.4824 39.2588C76.5234 38.9854 76.5439 38.6891 76.5439 38.3701ZM79.4219 38.377V38.2334C79.4219 37.6911 79.4993 37.1921 79.6543 36.7363C79.8092 36.276 80.0348 35.8773 80.3311 35.54C80.6273 35.2028 80.9919 34.9408 81.4248 34.7539C81.8577 34.5625 82.3545 34.4668 82.915 34.4668C83.4756 34.4668 83.9746 34.5625 84.4121 34.7539C84.8496 34.9408 85.2165 35.2028 85.5127 35.54C85.8135 35.8773 86.0413 36.276 86.1963 36.7363C86.3512 37.1921 86.4287 37.6911 86.4287 38.2334V38.377C86.4287 38.9147 86.3512 39.4137 86.1963 39.874C86.0413 40.3298 85.8135 40.7285 85.5127 41.0703C85.2165 41.4076 84.8519 41.6696 84.4189 41.8564C83.986 42.0433 83.4893 42.1367 82.9287 42.1367C82.3682 42.1367 81.8691 42.0433 81.4316 41.8564C80.9987 41.6696 80.6318 41.4076 80.3311 41.0703C80.0348 40.7285 79.8092 40.3298 79.6543 39.874C79.4993 39.4137 79.4219 38.9147 79.4219 38.377ZM81.3906 38.2334V38.377C81.3906 38.6868 81.418 38.9762 81.4727 39.2451C81.5273 39.514 81.6139 39.751 81.7324 39.9561C81.8555 40.1566 82.015 40.3138 82.2109 40.4277C82.4069 40.5417 82.6462 40.5986 82.9287 40.5986C83.2021 40.5986 83.4368 40.5417 83.6328 40.4277C83.8288 40.3138 83.986 40.1566 84.1045 39.9561C84.223 39.751 84.3096 39.514 84.3643 39.2451C84.4235 38.9762 84.4531 38.6868 84.4531 38.377V38.2334C84.4531 37.9326 84.4235 37.6501 84.3643 37.3857C84.3096 37.1169 84.2207 36.8799 84.0977 36.6748C83.9792 36.4652 83.8219 36.3011 83.626 36.1826C83.43 36.0641 83.193 36.0049 82.915 36.0049C82.637 36.0049 82.4001 36.0641 82.2041 36.1826C82.0127 36.3011 81.8555 36.4652 81.7324 36.6748C81.6139 36.8799 81.5273 37.1169 81.4727 37.3857C81.418 37.6501 81.3906 37.9326 81.3906 38.2334ZM89.6074 36.1348V42H87.6318V34.6035H89.4844L89.6074 36.1348ZM89.334 38.042H88.7871C88.7871 37.527 88.8486 37.0531 88.9717 36.6201C89.0993 36.1826 89.2839 35.8044 89.5254 35.4854C89.7715 35.1618 90.0745 34.9111 90.4346 34.7334C90.7946 34.5557 91.2116 34.4668 91.6855 34.4668C92.0137 34.4668 92.3145 34.5169 92.5879 34.6172C92.8613 34.7129 93.096 34.8656 93.292 35.0752C93.4925 35.2803 93.6475 35.5492 93.7568 35.8818C93.8662 36.21 93.9209 36.6042 93.9209 37.0645V42H91.9521V37.2832C91.9521 36.946 91.9066 36.6862 91.8154 36.5039C91.7243 36.3216 91.5944 36.194 91.4258 36.1211C91.2617 36.0482 91.0635 36.0117 90.8311 36.0117C90.5758 36.0117 90.3525 36.0641 90.1611 36.1689C89.9743 36.2738 89.8193 36.4196 89.6963 36.6064C89.5732 36.7887 89.4821 37.0029 89.4229 37.249C89.3636 37.4951 89.334 37.7594 89.334 38.042ZM93.7363 37.8164L93.0322 37.9053C93.0322 37.4222 93.0915 36.9733 93.21 36.5586C93.333 36.1439 93.513 35.7793 93.75 35.4648C93.9915 35.1504 94.29 34.9066 94.6455 34.7334C95.001 34.5557 95.4111 34.4668 95.876 34.4668C96.2314 34.4668 96.555 34.5192 96.8467 34.624C97.1383 34.7243 97.3867 34.8861 97.5918 35.1094C97.8014 35.3281 97.9609 35.6152 98.0703 35.9707C98.1842 36.3262 98.2412 36.7614 98.2412 37.2764V42H96.2656V37.2764C96.2656 36.9346 96.2201 36.6748 96.1289 36.4971C96.0423 36.3148 95.9147 36.1895 95.7461 36.1211C95.582 36.0482 95.3861 36.0117 95.1582 36.0117C94.9212 36.0117 94.7139 36.0596 94.5361 36.1553C94.3584 36.2464 94.2103 36.374 94.0918 36.5381C93.9733 36.7021 93.8844 36.8936 93.8252 37.1123C93.766 37.3265 93.7363 37.5612 93.7363 37.8164Z" fill="#383B58"/>
</svg>

                      </div>
                      </div>
                      </div>
                      <p className="card-text"><strong>Cidade:</strong> {produto.cidade && produto.cidade.nomeCidade}</p>

                      <p className="card-text">{produto.descricaoProduto}</p>
                      
                      <Link to={`/produto/${produto.idProduto}`} className="btn btn-primary bg-color1 w-100 mt-3">
                        ver mais
                      </Link>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          ))}
        </div>
        </div>
      </div>
      <Footer />
    </div>
  );
};

export default CategoryResults;
